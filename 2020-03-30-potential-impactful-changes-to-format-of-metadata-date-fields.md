---
applied_at: '2020-03-30'
applies_to:
  - api
is_impactful: true
is_new_feature: false
collapse: true
show_excerpt: true
is_index: false
category_id: changelog
subcategory_id: ''
id: 2020-03-30-potential-impactful-changes-to-format-of-metadata-date-fields
rank: null
total_steps: null
type: changelog
sibling_id: ''
parent_id: changelog
next_page_id: 2020-04-01-node-sdk-v1320-release
previous_page_id: 2020-03-30-change-to-metadata-instance-version
source_url: >-
  https://github.com/box/box-developer-changelog/blob/main/content/2020/03-30-potential-impactful-changes-to-format-of-metadata-date-fields.md
published_at: '2020-03-30'
fullyTranslated: true
---
# メタデータの`date`フィールドの形式に影響する可能性のある変更

Boxのメタデータインフラストラクチャに対する継続的な改善の一環として、メタデータテンプレートの`date`フィールドの形式に大きく影響する可能性のある3つの変更をリリースする予定です。これらの変更により、Box APIで返される形式は、API呼び出し間でより一貫性のあるものになります。

<!-- more -->

最初の変更は、日付におけるタイムゾーンオフセットの使用に影響します。これまでは、タイムゾーンオフセットを含めるように日付を設定した場合でも、APIによって返される日付には一貫性がなく、タイムゾーンオフセットが含まれるものもあれば、含まれないものもありました。今後は、すべての日付がUTC (協定世界時)に変換され、タイムゾーンオフセットは削除されます。

例:

* 日付が`2020-02-20T12:00:00.000-01:00`に設定されたと想定します。
* これまでは、APIでは`2020-02-20T12:00:00.000-01:00` (元の値)または`2020-02-20T13:00:00.000Z` (UTCに調整された値)が返されました。
* 今後は、常に`2020-02-20T13:00:00.000Z` (UTCに調整された値)が返されます。

2つ目の変更は、メタデータAPIによって返される日付の秒未満の精度に影響します。これまでは、メタデータAPIで返される値の秒未満の精度は0～3桁でした。今後、Boxから返されるメタデータの日時値は、常にミリ秒まで正確になります。

例:

* これまで、APIでは`2020-02-20T12:00:00Z`、`2020-02-20T12:00:00.0Z`、`2020-02-20T12:00:00.00Z`または`2020-02-20T12:00:00.000Z`が返される可能性がありました。
* 今後は、常に`2020-02-20T12:00:00.000Z`が返されます。

最後の変更は、メタデータインスタンスの更新時の[`test`](g/metadata/instances/update/#Test-a-value)操作の使用に影響します。これまでのテストでは、リテラル文字列値を使用して日時の値が比較されていました。今回の更新後は、UNIXのタイムスタンプ(ミリ秒単位)を使用して比較されます。

例:

* これまでは、`2020-01-21T19:20:00.123-08:00`は`2020-01-22T03:20:00.123Z`と同じではありませんでした。
* 今後、`2020-01-21T19:20:00.123-08:00`は`2020-01-22T03:20:00.123Z`と同じになります。

## 今回の変更がアプリケーションに及ぼす影響

`RFC3339`に準拠した日時の解析を実装するアプリケーションでは、これらはすべて同じ日付を表す有効な`RFC3339`値であるため、何も実行する必要はありません。`RFC3339`に準拠した日時の解析を実装していないアプリケーションは、解析を実行できるように更新する必要があります。

すべてのBox公式SDKでは、`RFC3339`に準拠した日時の解析をサポートしているため、Box公式SDKの最新バージョンを使用しているアプリケーションの場合、更新は不要です。

## 今回の変更がアプリケーションに影響を及ぼした場合の対応

今回の変更は、今後数週間かけて段階的にリリースする予定です。メタデータチームは潜在的な影響を監視しますが、ご自身が影響を受けていることに気付いた場合は、カスタマーサクセスマネージャまたは当社のサポートチャネルまでお問い合わせください。
